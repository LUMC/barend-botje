<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Barend Botje</title>
</head>
<body class="bg-blue-50 p-4 h-screen flex items-stretch">

<div class="min-w-96 max-w-4xl mx-auto border border-2 border-blue-800 rounded-xl overflow-hidden flex flex-col justify-between">
    <header class="h-20 w-full bg-blue-200 flex flex-row justify-start space-x-4 px-1">
        <div class="py-1 flex flex-shrink-0 w-20">
            <img src="barend.jpg" alt="Barend Mons" class="block w-18 w-auto rounded-full">
        </div>
        <div class="py-1 content-center">
            <h1 class="text-xl">Barend Botje</h1>
            <div class="text-sm flex items-center space-x-1">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" class="text-green-400 size-4">
                    <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1"></circle>
                </svg>
                <div>
                    Always online
                </div>
            </div>
        </div>
    </header>

    <main id="conversationResponse" class="p-2 sm:p-4 flex flex-col justify-end text-sm sm:text-base space-y-4 grow">
    </main>

    <footer class="w-full h-40 bg-white border-t border-blue-200 p-2">
        <form onsubmit="sendMessage(); return false;" action="">
            <div class="pb-2">
                <textarea class="w-full h-24 p-2" id="conversationInput" name="conversationInput" placeholder="Talk to me"></textarea>
            </div>
            <button type="submit" id="conversationButton" class="px-2 py-1 bg-blue-800 disabled:opacity-25 rounded-md text-white inline-flex items-center self-end">
                Send
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="animate-spin ml-2 h-5 w-5 text-white hidden">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
            </button>
        </form>
    </footer>
</div>

<script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>

<SCRIPT type="text/javascript">
    // Disable the Send button when there is nothing to submit.
    $("#conversationInput").keyup(
        function (e)
        {
            if ($(this).val().trim() == '') {
                $("#conversationButton").prop('disabled', true);
            } else if (e.which == 13) {
                $('#conversationButton').click();
            } else {
                $("#conversationButton").prop('disabled', false);
            }
        }
    ).keyup();

    // Set the click handler for the Send button.
    // Disable the button when clicked, to indicate that the process is loading.
    $("#conversationButton").click(
        function ()
        {
            // Disable the button and show it's busy.
            $(this).prop('disabled', true).find("svg").removeClass("hidden");
            // Disable download button, in case it's shown.
            $("#" + this.id.replace('Button', '') + "DownloadButton").prop('disabled', true);
            $(this).parents("form").submit();
            return false; // Don't submit the form the HTML way.
        }
    );



    function sendMessage ()
    {
        // This function sends the data over to the ajax script, puts the message on the screen,
        //  and displays the response when it comes in.

        var sMessage = $("#conversationInput").val();
        if (sMessage.length < 1) {
            return false;
        }

        var oBarend = $.post(
            "ajax.php",
            {
                "input": sMessage,
            }
        );

        return false;
    }
</SCRIPT>

</body>
</html>
